#!/usr/bin/env node

"use strict";

var configBuilder = require('../lib/configBuilder'),
    featureTransformer = require('../lib/featureTransformer'),
    specCollector = require('../lib/specCollector'),
    fileCollector = require('../lib/fileCollector'),
    resultCollector = require('../lib/resultCollector'),
    inspector = require('../lib/inspector'),
    spitterOuter = require('../lib/spitterOuter'),
    XmlWriter = require('../lib/junitXmlWriter'),
    jf = require('jsonfile'),
    fs = require('fs'),
    config = configBuilder(process.argv);

// function compareOutputFiles(specFile, resultsFile) {

//     /**
//      * Use the collector to get the content of each file
//      */
//     fileCollector(specFile, resultsFile, function(files){
//         var results = inspector(files);
//         var writer = new XmlWriter();
//         writer.writeResults(results);
//         var output = spitterOuter(results);
//         for (var i = 0; i < output.length; i++) {
//             console.log(output[i]);
//         }
//     });
// }

/**
 * Get the specs from the spec collector
 */
// specCollector(config.specGlob, function(specs) {

//     fs.writeFile(config.specFile, JSON.stringify(specs, null, 4), function (err) {
//         /**
//          * Get the result results from the result collector
//          */
//         resultCollector(config.resultsGlob, function(results) {

//             fs.writeFile(config.resultsFile, JSON.stringify(results, null, 4), function (err) {
//                 compareOutputFiles(config.specFile, config.resultsFile);

//             });

//         });
//     });
// });